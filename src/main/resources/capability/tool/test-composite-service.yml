info:
  version: 1.0.0
  title: test-composite-service
  description: |
    Integration of k6, Prometheus, and GitHub for comprehensive capability.

low_code:
  property:
    system_name: Cinema

  operation:
    - name: test-compose-smoke_testing_all_service_and_repository_report
      parameter:
        number_of_virtual_user: 1 <= n <= 5
      description: |
        Perform smoke testing on all services simultaneously while monitoring the testing status. Then, for the microservices that did not pass the tests, retrieve their recent activity within the past week, including the activity of each team member in their respective repositories. Finally, aggregate and present the results.
      access:
        protected:
          - supervisor
      body:
        - set-prometheus-edit_alert_rules: null
        - test-k6-smoke_testing_all_service:
            number_of_virtual_user: ${number_of_virtual_user}
        - monitor-prometheus-all_service_alert: null
        - toolkit-parse-json:
            jsonpath: .....${prometheus.monitor-prometheus-all_service_alert}
        - toolkit-flow-foreach:
            array: ${toolkit-parse-json}
            element_name: service_name
            operation: github.get-github-service_past_week_team_activity
            operation_parameter_json: {"service_name": "${service_name}"}