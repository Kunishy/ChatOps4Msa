info:
  version: 1.0.0
  title: RabbitMQ
  description: |
    Message Queue

low_code:
  on_message:
    - name: subscribe-rabbitmq-on_prometheus_alert
      parameter:
        event: null
      description: |
        Trigger when receiving alerts from Prometheus
      access: private
      body:
        - toolkit-json-parse:
            json: ${event}
            jsonpath: "$.data.alerts[*].labels.alertname"
        - toolkit-discord-embed:
            title: Prometheus Alert
            color: red
            fieldJson: ${toolkit-json-parse}
            thumbnail: http://grafana.server/thumbnail.png