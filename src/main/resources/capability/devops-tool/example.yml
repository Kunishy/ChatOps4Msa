info:
  version: 1.0.0
  title: example
  description: Just an example for the capability.
low_code:
  property:
    example_token: ${secret.example_token}
    api_url: https://api.example.com/metrics

  operation:
    - name: get-example-quality-summary
      description: Retrieve and summarize quality metrics from Example Service
      access: public
      parameter:
        service_name: The name of the example microservice
      body:
        - toolkit-restapi-auth_get:
            url: ${api_url}?service=${service_name}
            api_token: ${example_token}
            assign: raw_response

        - toolkit-json-parse:
            json: ${raw_response}
            jsonpath: $.metrics
            assign: metrics_data

        - toolkit-discord-text:
            text: Service `${service_name}` quality metrics：

        - toolkit-list-foreach:
            list: ${metrics_data}
            element_name: metric
            body:
              - toolkit-discord-text:
                  text: ${metric.name}： ${metric.value}

low_code:
  constructor:
    - name: get-example-current_time
      parameter: null
      description: Time reporting upon startup.
      access: private
      body:
        - toolkit-time-today: null
        - toolkit-discord-blocks:
            text: Today is ${toolkit-time-today}

  operation:
    - name: get-example-echo_message
      parameter:
        message: text message # get from Discord
      description: |
        Just echo a message to Discord
      access: public # all users can execute the operation
      body:
        - toolkit-discord-text: # return to Discord
            text: you say `${message}`
            assign: custom_variable # Declare a new variable
        - toolkit-flow-return:
            return: ${message}
    #newFuntion
    - name: get-example-hello_message
      parameter:
        message: text message # get from Discord
        answer: ${answer}
      description: |
        Just echo a message to Discord hello
      access: public # all users can execute the operation
      body:
        - toolkit-discord-get:
            text: getValue
            assign: value
        - toolkit-discord-text: # return to Discord
            text: Hello! `${message}`. The answer is `${value}`
            assign: custom_variable # Declare a new variable

    - name: get-example-math_calculate
      parameter:
        expression: like 2 * 3 / 4
      description: |
        Perform calculations using the given mathematical expression.
      access: public
      body:
        - toolkit-flow-value_to_local:
            value: ${expression}
            assign: number
        - toolkit-math-calculate:
            expression: ${number}
            assign: answer
        - toolkit-discord-text:
            text: the answer of `${expression}` is `${answer}`
    - name: get-example-new_message
      parameter:
        expression: useless text just try can it get parameter
      description: |
        try to make a new example operation.
      access: public
      body:
        - get-example-echo_message:
            message: ${expression}
        - toolkit-discord-text:
            text: Can get value from ${get-example-echo_message}
        - toolkit-discord-text:
            text: your input is `${expression}`.
